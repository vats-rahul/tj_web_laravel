var tj=tj||{};tj.cart=tj.cart||{},tj.cart.updateSpec=function(a,e,t,i,r,s,l,c,d){$step=parseInt($("."+l+"_"+i).attr("step")),$("input[name='"+r+"']");var n=parseInt($("."+l+"_"+i).val());if(isNaN(n))$("."+l+"_"+i).val(0);else{if("minus"==s){if(n>$("."+l+"_"+i).attr("min")&&($("."+l+"_"+i).val(n-$step).change(),$(".calPriceBtn_"+t).prop("disabled",!1),$(".go_to_cart_"+e).hide(),$(".add_to_cart_"+l+"_"+e).show()),n<=$("."+l+"_"+i).attr("min"))return $(this).attr("disabled",!0),$.growl.error({title:"Error occured",message:"Value can not be less than "+$("."+l+"_"+i).attr("min"),size:"large"}),!1}else if("plus"==s){if(0==$("."+l+"_"+i).attr("max"))$("."+l+"_"+i).val(n+$step).change(),$(this).attr("disabled",!1),$(".calPriceBtn_"+t).prop("disabled",!1),$(".go_to_cart_"+e).hide(),$(".add_to_cart_"+l+"_"+e).show();else{if(!($("."+l+"_"+i).attr("max")>0&&n<$("."+l+"_"+i).attr("max")))return $.growl.error({title:"Error occured",message:"Value can not be greater than "+$("."+l+"_"+i).attr("max"),size:"large"}),!1;$("."+l+"_"+i).val(n+$step).change(),$(this).attr("disabled",!1),$(".calPriceBtn_"+t).prop("disabled",!1),$(".go_to_cart_"+e).hide(),$(".add_to_cart_"+l+"_"+e).show()}}tj.cart.getCalPrice({plan_id:e,spec_id:t,page:l,product_id:a})}},tj.cart.updateinput=function(a,e,t,i,r,s,l,c,d){if(l<=0)return $(".detail_"+c).val(r),$.growl.error({title:"Error occured",message:"Value can not be greater than "+r,size:"large"}),!1;if($(".calPriceBtn_"+t).prop("disabled","disabled"),!(i>=r))return $(".detail_"+c).val(s),$.growl.error({title:"Error occured",message:"Value can not be less than "+r,size:"large"}),!1;if($(".calPriceBtn_"+t).attr("disabled",!1),$(".go_to_cart_"+e).hide(),$(".add_to_cart_"+d+"_"+e).show(),0==s)$(".calPriceBtn_"+t).prop("disabled",!1),$(".go_to_cart_"+e).hide(),$(".add_to_cart_"+d+"_"+e).show();else{if(!(s>0)||!(i<s))return $(".detail_"+c).val(s),$.growl.error({title:"Error occured",message:"Value can not be greater than "+r,size:"large"}),!1;$(".calPriceBtn_"+t).prop("disabled",!1),$(".go_to_cart_"+e).hide(),$(".add_to_cart_"+d+"_"+e).show()}tj.cart.getCalPrice({plan_id:e,spec_id:t,page:d,product_id:a})},tj.cart.choose_plan=function(a,e,t,i){if(""==a&&""==e)return!1;var r={plan_id:a,spec_id:e,page:t,product_id:i};if("modal"==t){$(".spec_vari_divs_modal_"+a).slideUp(),$(".spec_vari_div_modal_"+e).slideDown();var s=$(".old_plan_id_modal_"+a).val();if(null!=s){var l="<button type='button' name='calPriceBtn' class='btn-pl1-p-2 calculatebutton calPriceBtn_"+e+"' id='calPriceBtn_"+e+"' onclick=tj.cart.getCalPrice("+JSON.stringify(r)+")>CALCULATE PRICE</button>";$(".calPriceLi_"+s).html(l),$(".calPriceLi_"+s).addClass("calPriceLi_"+e),$(".calPriceLi_"+e).removeClass("calPriceLi_"+s),$(".old_plan_id_modal_"+a).val(e)}$(".others_varible_modal_"+a).removeClass("active_other_modal"),$(".spec_other_vari_modal_list_"+e).addClass("active_other_modal"),$(".others_varible_modal_"+a).css("display","none"),$(".active_other_modal").css("display","block")}else{$(".spec_vari_divs_detail_"+a).slideUp(),$(".spec_vari_div_detail_"+e).slideDown();var s=$(".old_plan_id_detail_"+a).val();if(null!=s){var l="<button type='button' name='calPriceBtn' class='btn-pl1-p-2 calculatebutton calPriceBtn_"+e+"' id='calPriceBtn_"+e+"' onclick=tj.cart.getCalPrice("+JSON.stringify(r)+")>CALCULATE PRICE</button>";$(".calPriceLi_"+s).html(l),$(".calPriceLi_"+s).addClass("calPriceLi_"+e),$(".calPriceLi_"+e).removeClass("calPriceLi_"+s),$(".old_plan_id_detail_"+a).val(e)}$(".others_varible_detail_"+a).removeClass("active_other"),$(".spec_other_vari_detail_list_"+e).addClass("active_other"),$(".others_varible_detail_"+a).css("display","none"),$(".active_other").css("display","block")}tj.cart.getCalPrice(r)},tj.cart.toggleSpec=function(a){$(".OtherViariables_"+a).removeClass("deactive-spec"),$(".switchInput_"+a).is(":checked")?$(".othervarid_"+a).removeClass("deactive-spec"):$(".othervarid_"+a).addClass("deactive-spec"),$(".modswitchInput_"+a).is(":checked")?$(".modalothervarid_"+a).removeClass("deactive-spec"):$(".modalothervarid_"+a).addClass("deactive-spec")},tj.cart.getCalPrice=function(a){var e=tj.cart.preparePurchaseVariable(a),t=tj.cart.validateSpecs(a.spec_id,a.page);if(!t)return t;tj.api.AjaxRequest("POST",tj.baseUrl+"pricing/calculate_price",function(e){e.data.status&&(0!==e.data.discount_price?"detail"==a.page?($(".plan"+a.plan_id).html(`
                            <p class="calculated-price">Calculated Price 
                                <span class="inclusive-tax">(Exclusive of all taxes)</span>
                            </p>
                            <span class="ruppes-sign">₹</span>
                            <span class="ruppes-amount">${e.data.discount_price.toFixed(0)}</span>
                            <span class="spec-discount-price">₹${e.data.orignal_price.toFixed(0)}</span>
                        `),$(".plan"+a.plan_id).attr("data-price",e.data.discount_price)):($(".modplan"+a.plan_id).html(`
                            <p class="calculated-price">Calculated Price 
                                <span class="inclusive-tax">(Exclusive of all taxes)</span>
                            </p>
                            <span class="ruppes-sign">₹</span>
                            <span class="ruppes-amount">${e.data.discount_price.toFixed(0)}</span> 
                            <span class="spec-discount-price">₹${e.data.orignal_price.toFixed(0)}</span>
                        `),$(".modplan"+a.plan_id).attr("data-price",e.data.discount_price)):"detail"==a.page?($(".plan"+a.plan_id).html(`
                            <p class="calculated-price">Calculated Price
                                <span class="inclusive-tax">(Exclusive of all taxes)</span>
                            </p>
                            <span class="ruppes-sign">₹</span>
                            <span class="ruppes-amount">${e.data.orignal_price.toFixed(0)}</span>
                        `),$(".plan"+a.plan_id).attr("data-price",e.data.orignal_price)):($(".modplan"+a.plan_id).html(`
                            <p class="calculated-price">Calculated Price
                                <span class="inclusive-tax">(Exclusive of all taxes)</span>
                            </p>
                            <span class="ruppes-sign">₹</span>
                            <span class="ruppes-amount">${e.data.orignal_price.toFixed(0)}</span>
                        `),$(".modplan"+a.plan_id).attr("data-price",e.data.orignal_price))),e.data.status||$.growl.error({title:"Error occured",message:e.message,size:"large"})},onError,onComplete,e)},tj.cart.addCart=function(a){"detail"==a.page?a.spec_id=$("#key_spec_name_dropdown_detail_"+a.plan_id).val():a.spec_id=$("#key_spec_name_dropdown_modal_"+a.plan_id).val();var e=tj.cart.validateSpecs(a.spec_id,a.page);if(!e)return e;var t=tj.cart.preparePurchaseVariable(a);t.addCartFlag=1,t.category_type=a.category_type,console.log(t),"product"==tj.page_type&&(sessionStorage.setItem("buy_now_prodid",pdp.product_id),sessionStorage.setItem("buy_now_product",pdp.product_name)),tj.api.AjaxRequest("POST",tj.baseUrl+"cart/processCart",function(e){if(e.status||$.growl.error({title:"Error",message:e.msg,size:"large"}),void 0!=e.cart_success){$("#number_badge").length?$("#number_badge").html(e.qty):$("#cart_icon_cont").append('<span id="number_badge" class="number_badge tjin">'+e.qty+"</span>"),$.growl.notice({title:"Added to Cart",message:e.msg,size:"large"});var t={content_type:"product",content_ids:[a.product_id],content_name:a.plan_name};tj.events.ga4Events("AddToCart",t),tj.events.clevertap.addedToCartEvent(e.product);var i="";return"Buy Now"==(i=$(".animation_normal_"+a.page+"_"+a.plan_id).text()).trim()&&($(".animation_normal_"+a.page+"_"+a.plan_id).text("Redirecting To Cart"),$('<div class="progress_bar_animate"></div>').insertAfter(".animation_normal_"+a.page+"_"+a.plan_id).css("display","inline-block"),$('<img alt="images" src="'+tj.envUrl+'/assets/new-assets/images/close-white-16px.svg" class="image_cross_button">').insertAfter(".animation_normal_"+a.page+"_"+a.plan_id).show()),tj.cart.setUrl(a.category_type,a.slug),"product"==tj.page_type&&tj.captureBuyNowLead(),!1}},onError,onComplete,t)},tj.cart.preparePurchaseVariable=function(a){var e={};e.plan_id=a.plan_id,e.spec_id=a.spec_id;var t=[];"detail"==a.page?$("input",$(".spec_vari_lists_detail_"+a.spec_id)).each(function(a,e){t.push({id:this.id,name:this.name,value:this.value,text:$(this).attr("data-spec-text"),is_edit:$(this).attr("data-is-edit"),max:$(this).attr("max"),min:$(this).attr("min"),step:$(this).attr("step")})}):$("input",$(".spec_vari_lists_modal_"+a.spec_id)).each(function(a,e){t.push({id:this.id,name:this.name,value:this.value,text:$(this).attr("data-spec-text"),is_edit:$(this).attr("data-is-edit"),max:$(this).attr("max"),min:$(this).attr("min"),step:$(this).attr("step")})}),e.variables=t;var i=[];"detail"==a.page?$("input",$(".spec_other_vari_detail_list_"+a.spec_id)).each(function(a){var e=0;$(this).is(":checked")&&(e=1),i.some(a=>a.id===this.id)||i.push({id:this.id,name:this.name,value:$(this).data("value"),checked:e,spec_label:$(this).attr("data-spec-label"),text:$(this).attr("data-spec-text")})}):$("input",$(".spec_other_vari_modal_list_"+a.spec_id)).each(function(a){var e=0;$(this).is(":checked")&&(e=1),i.some(a=>a.id===this.id)||i.push({id:this.id,name:this.name,value:$(this).data("value"),checked:e,spec_label:$(this).attr("data-spec-label"),text:$(this).attr("data-spec-text")})});var r=void 0!==$("#edit_plan_"+a.plan_id).val()?1:0,s=$("#api_available_"+a.plan_id).val(),l=$("#rel_order_product_"+a.plan_id).val();return e.other_variables=i,e.product_id=void 0!=a.product_id?a.product_id:"",e.plan_name=void 0!=a.plan_name?a.plan_name:"",e.api_available=s,e.rel_order_product_id=l,e.edit_plan=r,e},tj.cart.setUrl=function(a="",e=""){window.location.href=`${tj.envUrl}/ordernow/${e}`},tj.cart.validateSpecs=function(a,e){var t=!0;return $('input[type="text"][data-spec-id="'+a+'"]').each(function(a,i){var r=parseInt($(i).val()),s=parseInt($(i).attr("max")),l=parseInt($(i).attr("min")),c=$(i).attr("name"),d=$(i).attr("id");$(i).hasClass(e+"_"+d)&&(r<l?(t=!1,$.growl.error({title:"Error occured",message:c+" Value can not be less than "+l,size:"large"})):s>0&&r>s&&(t=!1,$.growl.error({title:"Error occured",message:c+" Value can not be greater than "+s,size:"large"})))}),t};